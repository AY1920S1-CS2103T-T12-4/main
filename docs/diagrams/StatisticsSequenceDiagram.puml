@startuml
!include style.puml

box Logic LOGIC_COLOR_T1
participant ":StatsCommand" as ExportCommand LOGIC_COLOR
end box

box Model MODEL_COLOR_T1
participant ":Model" as Model MODEL_COLOR
end box


[-> ExportCommand : execute(model)
activate ExportCommand

loop for each rating predicate
    ExportCommand -> Model : updateFilteredFlashCardList(predicate)
    activate Model
    ExportCommand <-- Model : list
    deactivate Model

    ExportCommand -> ExportCommand : size()
    activate ExportCommand
    ExportCommand <-- ExportCommand : numRating
    deactivate ExportCommand
end

ExportCommand -> Model : getStats()
activate Model
ExportCommand <-- Model : stats
deactivate Model


[<--ExportCommand
deactivate ExportCommand
@enduml